"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["topi-payment-integration-plugin"],{3039:(e,t,n)=>{var i=n(6285);class o extends i.Z{init(){this.bindOffCanvasIfAvailable(),this.applyFromData(),this.bindSwpProductOptionPriceChange()}bindOffCanvasIfAvailable(){try{const e=document.querySelector("[data-off-canvas-cart], [data-offcanvas-cart], #offcanvas-cart");if(!e)return;const t=window.PluginManager.getPluginInstanceFromElement(e,"OffCanvasCart")||window.PluginManager.getPluginInstanceFromElement(e,"OffCanvas");t&&t.$emitter&&t.$emitter.subscribe("offCanvasOpened",this.onOffCanvasOpened.bind(this))}catch(e){}}onOffCanvasOpened(){this.applyFromData()}applyFromData(){const e=document.querySelector("#topi-offcanvas-cart-items-data"),t=null==e?void 0:e.getAttribute("data-topi-cart-items");if(!t)return;let n=[];try{n=Object.values(JSON.parse(t))}catch(e){}const i=()=>{window.topi=window.topi||{},window.topi.cartItems=n,console.log("window.topi.cartItems",n)};void 0===window.topi?window.addEventListener("topi.widgets.loaded",i,{once:!0}):i()}bindSwpProductOptionPriceChange(){document.$emitter.subscribe("ProductOptions/onBeforeInsertOptionsResult",(e=>{const t=document.createElement("div");t.insertAdjacentHTML("beforeend",e.detail);const n=t.querySelector(".swp-productoptions--result-totalrow .price"),i=parseInt(n.innerText.replace(/[^\d,.-]/g,"").replace(",","").replace(".","").trim()),o=this.isGross(),a={...window.pdpItem,price:{currency:"EUR",net:o?Math.round(i/119*100):i,gross:o?i:Math.round(i/100*119)}};"undefined"==typeof topi?window.addEventListener("topi.widgets.loaded",(function(){topi.pdpItem=a})):topi.pdpItem=a}))}isGross(){const e=document.querySelector(".product-detail-price, .price");if(null!=e&&e.textContent.includes("*")){const e=document.querySelector(".product-detail-price-container small, .product-detail-tax");if(e){const t=e.textContent.toLowerCase();if(t.includes("inkl.")||t.includes("incl."))return!0;if(t.includes("exkl.")||t.includes("excl."))return!1}}}}window.PluginManager.register("TopiPaymentIntegration",o,"body")}},e=>{e.O(0,["vendor-node","vendor-shared"],(()=>{return t=3039,e(e.s=t);var t}));e.O()}]);